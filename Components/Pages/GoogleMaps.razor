@page "/googleMaps"

@inject IJSRuntime JSRuntime

<h3>Google Maps with Geolocation</h3>

<!-- Map container -->
<div id="map-container">
    <div id="map" style="height: 400px; width: 100%;"></div>
</div>

<!-- Button to trigger geolocation and center the map -->
<button class="btn btn-primary" @onclick="PanToCurrentLocation">Pan to Current Location</button>

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            // Automatically initialize the map when the component is loaded
            await JSRuntime.InvokeVoidAsync("initMap");
        }
    }

    private async Task PanToCurrentLocation()
    {
        // Pan to current location using a dedicated JS function
        await JSRuntime.InvokeVoidAsync("panToCurrentLocation");
    }
}
